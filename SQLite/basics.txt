

#include "statement.hpp"


class sqlite3::Database
{
	public :
	
	Database();
	void open(const char* filename, int flags = SQLITE_OPEN_READWRITE, const char *zVFS = 0);
	void close();
	
	void prepare(const char *query, int maxSize, Statement& modifiedStmt);
	void prepareSelectAll(const char *table, int maxSize, Statement& modifiedStmt);
};

sqlite3::Statement
{
	public :

	void prepareIn(Database& target, const char *query, int maxSize = -1);
	bool step();
	void reset(bool doResetBindings = false);
	void erase();

	void bindInt(int i, int value);
	void bindDouble(int i, double value);
	void bindText(int i, const char* value, int size);
	void bindNull(int i);
};


const sqlite3::Statement
{
	int 		columnInt(int i);
	double 		columnDouble(int i);
	char*		columnText(int i);
	int 		columnCount();
};


Binding system :
Each argument is numbered and replaced with a value (depending on the function).
The arguments are written with on of those formats :
? / ?n / :str / @str / $str ;
Where n is the number of the argument (must be between 1 and 999), and str its name.
Arguments (save for ?n) are indexed with their place in the string, the first from the left being n°1, the second from the left n°2...
Two arguments with the same name also have the same index.